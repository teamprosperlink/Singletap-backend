# ============================================
# SINGLETAP DYNAMIC LOOKUP SYSTEM
# Environment Configuration
# ============================================

# --------------------------------------------
# EXTERNAL API CREDENTIALS
# --------------------------------------------

# STANDS4 Abbreviations API
# Free: 100/day | Premium ($10/mo): 25,000/day
# https://www.abbreviations.com/api.php
STANDS4_USER_ID=13657
STANDS4_TOKEN=C1kxTMuw5HojC5GO

# Nationalize.io API (Name â†’ Nationality inference)
# NOTE: Not used for demonym resolution (wrong use case)
# Keep for potential future use (user profile nationality detection)
# https://nationalize.io/
NATIONALIZE_API_KEY=79d1ec86866df620fae76c010379f712

# RapidAPI (for WordsAPI)
# Free: 2,500/day
# https://rapidapi.com/dpventures/api/wordsapi
RAPIDAPI_KEY=your_rapidapi_key_here

# OpenAI API (LLM Fallback)
# Used for edge cases when APIs don't have consensus
# https://platform.openai.com/
OPENAI_API_KEY=your_openai_key_here

# GeoNames API (for city/region demonyms)
# Free tier with account
# https://www.geonames.org/export/web-services.html
GEONAMES_USERNAME=your_geonames_username_here

# --------------------------------------------
# DATABASE CONFIGURATION
# --------------------------------------------

# PostgreSQL (Production)
# DATABASE_URL=postgresql://user:password@localhost:5432/singletap

# SQLite (Development) - Default
DATABASE_URL=sqlite:///./singletap_lookup.db

# Redis (Production Cache)
# REDIS_URL=redis://localhost:6379/0

# --------------------------------------------
# SYSTEM CONFIGURATION
# --------------------------------------------

# Preprocessing mode: "static", "dynamic", "hybrid"
# - static: Use legacy hardcoded dicts only
# - dynamic: Use DB cache + APIs + LLM
# - hybrid: Try static first, then dynamic (transitional)
PREPROCESS_MODE=dynamic

# Enable LLM fallback (costs money per call)
ENABLE_LLM_FALLBACK=1

# Enable auto-caching of resolved terms
ENABLE_AUTO_CACHE=1

# Cache TTL in days (how long before re-verification)
CACHE_TTL_DAYS=30

# Consensus threshold (min sources that must agree)
CONSENSUS_THRESHOLD=2

# Confidence threshold for caching LLM results
LLM_CONFIDENCE_THRESHOLD=0.8

# --------------------------------------------
# SIMILAR MATCHING CONFIGURATION
# --------------------------------------------
# When enabled, the search-and-match endpoint returns similar listings
# in addition to exact matches. Similar listings are those where
# Tier 1 fields (intent, domain, type) match but Tier 2 fields
# (numeric constraints, location) have some differences.

# Enable similar matching (1=enabled, 0=disabled)
ENABLE_SIMILAR_MATCHING=1

# Minimum similarity score (0.0-1.0) to include in similar results
# 0.70 = listings must match at least 70% of constraints
SIMILAR_MATCH_MIN_SCORE=0.70

# Maximum number of similar results to return (per search)
SIMILAR_MATCH_MAX_RESULTS=10

# --------------------------------------------
# RATE LIMITING
# --------------------------------------------

# STANDS4 daily limit (leave buffer from 100)
STANDS4_DAILY_LIMIT=90

# REST Countries rate limit (requests per second)
REST_COUNTRIES_RATE_LIMIT=1

# --------------------------------------------
# LOGGING & MONITORING
# --------------------------------------------

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Enable detailed lookup logging
ENABLE_LOOKUP_LOGGING=1

# --------------------------------------------
# GRAFANA CLOUD (Recommended - All-in-One Observability)
# --------------------------------------------
# Free tier includes: 50GB logs, 50GB traces, 10k metrics, 14-day retention
# Sign up at: https://grafana.com/products/cloud/

# Enable Grafana Cloud (set to 'true' to enable)
GRAFANA_CLOUD_ENABLED=false

# Your Grafana Cloud OTLP endpoint
# Format: https://otlp-gateway-prod-{region}.grafana.net/otlp
# Find this in: Grafana Cloud Portal > Your Stack > OpenTelemetry > Configure
GRAFANA_CLOUD_ENDPOINT=https://otlp-gateway-prod-us-central-0.grafana.net/otlp

# Your Grafana Cloud Instance ID
# Find this in: Grafana Cloud Portal > Your Stack > Details
GRAFANA_CLOUD_INSTANCE_ID=

# Your Grafana Cloud API Token
# Create at: Grafana Cloud Portal > Your Stack > Security > API Keys
# Required role: MetricsPublisher
GRAFANA_CLOUD_API_KEY=

# Service identification
OTEL_SERVICE_NAME=vriddhi-matching-engine
OTEL_SERVICE_VERSION=2.0.0
ENVIRONMENT=development

# --------------------------------------------
# LEGACY MONITORING (Alternative to Grafana Cloud)
# --------------------------------------------
# Use these if you prefer separate tools instead of Grafana Cloud

# Jaeger Tracing (if not using Grafana Cloud)
# TRACING_ENABLED=false
# OTLP_ENDPOINT=http://localhost:4317

# Sentry Error Tracking (if not using Grafana Cloud)
# SENTRY_ENABLED=false
# SENTRY_DSN=